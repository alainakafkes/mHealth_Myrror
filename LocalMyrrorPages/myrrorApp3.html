<!DOCTYPE html>

<html>
	<head>
		<title>Magic Myrror</title>
		<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
		<style>
			body {
				background-color: black;
				color: white;
			}
			#positiveMessage {
				position:fixed;
				bottom:0;
				width:100%;
				text-align: center
			}
		</style>
	</head>
	<body>
		<div id="messagesDiv"><p>Hello</p></div>
		<div id="rectangle-location" style="align-items:center"></div>
		<script>
			var fixedHeight = "5in"; //rectangle has a fixed height
			//Connect to the waist size database
			var myDataRef = new Firebase('https://luminous-heat-3152.firebaseio.com/Waist');
			//Called when new data is inserted into the DB
			myDataRef.on('child_added', function(snapshot){
				var message = snapshot.val();
				displayImage(message.size)
			});

			setTimeout(function(){
				window.location.href = "myrrorAppAverage.html"
			}, 5000);

			//Function to display the rectangle
			function displayImage(size) {
				var messageDiv = document.getElementById("messagesDiv");
				messageDiv.style.color = "white"; //this is for the text color
				messageDiv.innerHTML = size; //display the number for now

			  	var sizeOnly = size*(3/8); //taking 3/8ths of circumgference
			  	sizeOnly = (sizeOnly/1.565)/0.97;
			  	sizeOnly = sizeOnly+"in"; // cast to inches not pixels


				var rectDiv = document.getElementById("rectangle-location"); //div
			  	rectDiv.style.height = fixedHeight;
			  	rectDiv.style.width = sizeOnly;
			  	rectDiv.style.border =  "3px solid blue";
			  	//rectDiv.style.margin = "auto";
				rectDiv.style.position = "absolute";
				rectDiv.style.top = "50%";
				rectDiv.style.left = "50%";
				rectDiv.style.transform = "translate(-50%, -50%)";
			};
		</script>
		<div id="positiveMessage"><h2>You look great!</h2></div>

	</body>
</html>